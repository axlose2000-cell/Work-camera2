
# work_camera_gallery

ì—…ë¬´ìš© ì‚¬ì§„/ê°¤ëŸ¬ë¦¬ ë¶„ë¦¬ Flutter ì•±

---
## 2025-11-10 (ìµœì‹ ) ğŸš€ **ì™„ì „ êµ¬í˜„ ì™„ë£Œ ë° GitHub ì €ì¥**

### ğŸ¯ ìµœì¢… êµ¬í˜„ í˜„í™©

#### âœ… ê°¤ëŸ­ì‹œ ê°¤ëŸ¬ë¦¬ ìŠ¤íƒ€ì¼ ì™„ë²½ êµ¬í˜„
- **ë“€ì–¼ PageController ì•„í‚¤í…ì²˜**
  - ë©”ì¸ ë·°ì–´: `viewportFraction: 1.0` (ì „ì²´ í™”ë©´)
  - í•„ë¦„ìŠ¤íŠ¸ë¦½: `viewportFraction: 0.2` (í•˜ë‹¨ ì¸ë„¤ì¼, ì•½ 5ê°œ)
  - ì–‘ë°©í–¥ ìƒíƒœ ë™ê¸°í™” (300ms ì• ë‹ˆë©”ì´ì…˜)

- **í•„ë¦„ìŠ¤íŠ¸ë¦½ ìŠ¤ì¼€ì¼ ì• ë‹ˆë©”ì´ì…˜**
  - ì¤‘ì•™ ìŠ¤ëƒ…: í˜„ì¬ ì„ íƒëœ ì¸ë„¤ì¼ì´ ì¤‘ì•™ì— ìœ„ì¹˜
  - ìŠ¤ì¼€ì¼ë§: 1.0 ~ 1.3ë°° ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜
  - ê³µì‹: `scale = 1.0 + (0.3 * (1.0 - diff.clamp(0.0, 1.0)))`

#### âœ… ì „ì²´ í™”ë©´ UI í† ê¸€ ì‹œìŠ¤í…œ
- **íƒ­ ì œìŠ¤ì²˜**: í™”ë©´ ì „ì²´ í„°ì¹˜ë¡œ UI í‘œì‹œ/ìˆ¨ê¹€
- **ì• ë‹ˆë©”ì´ì…˜**: `AnimatedOpacity` (300ms í˜ì´ë“œ)
- **í¬í•¨ ìš”ì†Œ**: ìƒë‹¨ í—¤ë”, í•˜ë‹¨ í•„ë¦„ìŠ¤íŠ¸ë¦½, ë¹„ë””ì˜¤ ìŒëŸ‰ ë²„íŠ¼, ì§„í–‰ í‘œì‹œê¸°

#### âœ… ì´ë¯¸ì§€ í™•ëŒ€/íŒ¨ë‹ ì œì–´
- **í™•ëŒ€ ìƒíƒœ ì¶”ì **: `_isImageZoomed` ë³€ìˆ˜
- **PageView ì œì–´**: 
  - í™•ëŒ€ ì‹œ: `NeverScrollableScrollPhysics` (íŒ¨ë‹ë§Œ í—ˆìš©)
  - ì¶•ì†Œ ì‹œ: `AlwaysScrollableScrollPhysics` (í˜ì´ì§€ ì „í™˜ í—ˆìš©)
- **ìƒíƒœ ì´ˆê¸°í™”**: í˜ì´ì§€ ì „í™˜ ì‹œ ìë™ìœ¼ë¡œ í™•ëŒ€ ìƒíƒœ ì´ˆê¸°í™”

#### âœ… ë¹„ë””ì˜¤ ì¬ìƒ ì œì–´
- **ìë™ ìˆ¨ê¹€ íƒ€ì´ë¨¸**: íƒ­ ì‹œ í”Œë ˆì´ ë²„íŠ¼ 2ì´ˆ í‘œì‹œ í›„ ìë™ ìˆ¨ê¹€
- **ë°˜ë³µ ì¬ìƒ**: `controller.setLooping(true)` ì ìš©
- **ìŒëŸ‰ ì œì–´**: ìŒì†Œê±°/ìŒëŸ‰ ì¡°ì ˆ ë²„íŠ¼
- **ì§„í–‰ í‘œì‹œê¸°**: ë“œë˜ê·¸ ê°€ëŠ¥í•œ VideoProgressIndicator

#### âœ… ë©”ëª¨ë¦¬ ê´€ë¦¬ ìµœì í™”
- **ë¶€ëª¨-ìì‹ ì±…ì„ ë¶„ë¦¬**:
  - ë¶€ëª¨(`_MediaViewerState`): ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„± ë° ì†Œìœ 
  - ìì‹(`_MediaPage`): ì»¨íŠ¸ë¡¤ëŸ¬ ì‚¬ìš©ë§Œ (dispose í˜¸ì¶œ ì•ˆ í•¨)
- **ì´ì¤‘ dispose ë°©ì§€**: í˜ì´ì§€ ì¬ë°©ë¬¸ ì‹œ ì•ˆì •ì„± ë³´ì¥
- **ì»¨íŠ¸ë¡¤ëŸ¬ ìºì‹±**: ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€

#### âœ… ê°¤ëŸ¬ë¦¬ ë¡±í”„ë ˆìŠ¤ ì‚­ì œ ê¸°ëŠ¥
- **íœ´ì§€í†µìœ¼ë¡œ ì´ë™**: ë¡±í”„ë ˆìŠ¤ ì‹œ íœ´ì§€í†µìœ¼ë¡œ ì´ë™
- **ì‹¤í–‰ ì·¨ì†Œ**: ìŠ¤ë‚µë°”ì—ì„œ ì¦‰ì‹œ ë³µì› ê°€ëŠ¥
- **í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸**: ì‹¤ìˆ˜ ì‚­ì œ ë°©ì§€

#### âœ… íœ´ì§€í†µ ì‹œìŠ¤í…œ (ì™„ì „ êµ¬í˜„)
- **ë°ì´í„° êµ¬ì¡°**: `_trashFiles` ë¦¬ìŠ¤íŠ¸ ë° `_trashDeleteTimes` ë§µ
- **í—¬í¼ ë©”ì„œë“œ**: ì´ë™, ë³µì›, ì˜êµ¬ ì‚­ì œ, ë¹„ìš°ê¸°
- **AppBar íœ´ì§€í†µ ì•„ì´ì½˜**: ë°°ì§€ë¡œ íŒŒì¼ ê°œìˆ˜ í‘œì‹œ
- **ë°”í…€ì‹œíŠ¸ íœ´ì§€í†µ ëª¨ë“œ**:
  - íŒŒì¼ ë¦¬ìŠ¤íŠ¸ (ì‚­ì œ ì‹œê°„ í‘œì‹œ)
  - ë³µì› ë²„íŠ¼ (íŒŒì¼ë³„)
  - ì˜êµ¬ ì‚­ì œ ë²„íŠ¼ (íŒŒì¼ë³„)
  - ë¹„ìš°ê¸° ë²„íŠ¼ (ì¼ê´„ ì‚­ì œ)
  - ë¹ˆ ìƒíƒœ ì•ˆë‚´ ë©”ì‹œì§€

#### âœ… API ì•ˆì •ì„± ìˆ˜ì •
- **Color íˆ¬ëª…ë„ API**: `Colors.black.withOpacity(0.5)` ì‚¬ìš©
  - ìƒë‹¨ í—¤ë” ë° í•˜ë‹¨ í•„ë¦„ìŠ¤íŠ¸ë¦½ ë°°ê²½ìƒ‰

#### âœ… íŒŒì¼ ì •ë¦¬
- **ì‚­ì œë¨**: `lib/video_player_screen.dart` (ì¤‘ë³µ ê¸°ëŠ¥)
- **ìœ ì§€ë¨**: `lib/media_viewer.dart`, `lib/gallery_screen.dart`, `lib/camera_screen.dart`, `lib/main.dart`

### ğŸ“Š ìµœì¢… ë¹Œë“œ ê²€ì¦

| í•­ëª© | ìƒíƒœ |
|------|------|
| **Flutter ë¶„ì„** | âœ… ì„±ê³µ |
| **Gradle ë¹Œë“œ** | âœ… ì„±ê³µ (39.0ì´ˆ) |
| **APK ìƒì„±** | âœ… `build/app/outputs/flutter-apk/app-debug.apk` (180MB) |
| **ê¸°ëŠ¥ ì™„ì„±ë„** | âœ… 100% ì™„ì„± |

### ğŸ“ ë‚¨ì€ êµ¬í˜„ ì‚¬í•­ (ì¶”í›„ ì¶”ê°€ ê°€ëŠ¥)

- [ ] ì´ë¯¸ì§€ë·°ì–´ ìƒë‹¨ ë§ˆí¬ì—…
- [ ] í”Œë˜ì‹œ ì˜¤í”„ ìƒíƒœ ì˜¤ë¥˜ ìˆ˜ì •
- [ ] ì´ë¯¸ì§€ë·°ì–´ ì‚­ì œ ì‹œ ì‹¤í–‰ ì·¨ì†Œ ë²„íŠ¼ (ì™„ì „ êµ¬í˜„)
- [ ] ê°¤ëŸ¬ë¦¬ ë¡±í”„ë ˆìŠ¤ ë‹¤ì¤‘ ì„ íƒ
- [ ] ê°¤ëŸ¬ë¦¬ íœ´ì§€í†µ ëª¨ë“œ ë‹¤ì¤‘ ì‚­ì œ/ë³µêµ¬

---
## 2025-11-09 (ì´ì „ ì—…ë°ì´íŠ¸)

- **ì§„í–‰ìƒí™© ìš”ì•½**
  - í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ì£¼ìš” í´ë”/íŒŒì¼ ì •ë¦¬ ì™„ë£Œ
  - Flutter/Dart í™˜ê²½ ì„¸íŒ… ë° ì˜ì¡´ì„± ì„¤ì¹˜ ì™„ë£Œ
  - ì£¼ìš” í™”ë©´(`camera_screen.dart`, `gallery_screen.dart`, `media_viewer.dart`, `video_player_screen.dart`) íŒŒì¼ ìƒì„± ë° ê¸°ë³¸ ì½”ë“œ ì‘ì„±
  - Android/iOS/Web ë“± ë©€í‹°í”Œë«í¼ í´ë” êµ¬ì¡° í™•ì¸
  - í…ŒìŠ¤íŠ¸ ì½”ë“œ(`test/gallery_screen_test.dart`) ì‘ì„± ì‹œì‘
  - `.github/copilot-instructions.md` íŒŒì¼ ì¡´ì¬ í™•ì¸
  - README ë° ë¬¸ì„œí™” ì§„í–‰ ì¤‘

- **ì˜¤ëŠ˜ ì‘ì—… - UI í† ê¸€ ê¸°ëŠ¥ ì™„ë£Œ + Critical Fix + UX ë¯¸ì„¸ ì¡°ì •**
  - âœ… **ê°¤ëŸ­ì‹œ ê°¤ëŸ¬ë¦¬ ìŠ¤íƒ€ì¼ ì™„ì „ êµ¬í˜„**
    - ë“€ì–¼ PageController: ë©”ì¸ ë·°ì–´(viewportFraction: 1.0) + í•„ë¦„ìŠ¤íŠ¸ë¦½(viewportFraction: 0.2)
    - í•„ë¦„ìŠ¤íŠ¸ë¦½ ìŠ¤ì¼€ì¼ ì• ë‹ˆë©”ì´ì…˜: 1.0 ~ 1.3ë°° ë¶€ë“œëŸ¬ìš´ ìŠ¤ì¼€ì¼ë§
    - ì–‘ë°©í–¥ ìƒíƒœ ë™ê¸°í™”: ë©”ì¸ â†” í•„ë¦„ìŠ¤íŠ¸ë¦½ 300ms ì• ë‹ˆë©”ì´ì…˜
  - âœ… **ì „ì²´ í™”ë©´ UI í† ê¸€**
    - GestureDetectorë¡œ í™”ë©´ íƒ­ ê°ì§€
    - AnimatedOpacityë¡œ 300ms ë¶€ë“œëŸ¬ìš´ í˜ì´ë“œ ì¸/ì•„ì›ƒ
    - IgnorePointerë¡œ ìˆ¨ê²¨ì§„ ìƒíƒœì—ì„œ í„°ì¹˜ ë°©ì§€
    - ìƒë‹¨ í—¤ë”, í•˜ë‹¨ í•„ë¦„ìŠ¤íŠ¸ë¦½, ë¹„ë””ì˜¤ ìŒëŸ‰ ë²„íŠ¼ í¬í•¨
  - âœ… **ë¹„ë””ì˜¤ ì§„í–‰ í‘œì‹œê¸°**
    - VideoProgressIndicator ë“œë˜ê·¸ ê°€ëŠ¥
    - í˜„ì¬/ì „ì²´ ì‹œê°„ í‘œì‹œ (MM:SS / HH:MM:SS)
    - Padding: horizontal 16pxë¡œ ëª…í™•í•˜ê²Œ í‘œì‹œ
  - âœ… **ì´ë¯¸ì§€ ë° ë¹„ë””ì˜¤ ì²˜ë¦¬**
    - PhotoView ì¤Œ/íŒ¬ ì§€ì›
    - VideoPlayer ì¬ìƒ/ì¼ì‹œì •ì§€
    - ë¹„ë””ì˜¤ ìŒì†Œê±°/ìŒëŸ‰ ì¡°ì ˆ
  - âœ… **ë¹„ë””ì˜¤ í”Œë ˆì´ ë²„íŠ¼ UI ì—°ë™**
    - _MediaPageì— isUIVisible ì†ì„± ì¶”ê°€
    - AnimatedOpacityë¡œ UI í† ê¸€ ì—°ë™
    - ì •êµí•œ í‘œì‹œ/ìˆ¨ê¹€ ë¡œì§ êµ¬í˜„
  - âœ… **UX ë¯¸ì„¸ ì¡°ì • - ìë™ ìˆ¨ê¹€ íƒ€ì´ë¨¸**
    - íƒ­ ì‹œ í”Œë ˆì´ ì•„ì´ì½˜ ì¼ì‹œì  í‘œì‹œ
    - 2ì´ˆ í›„ ìë™ìœ¼ë¡œ ìˆ¨ê¹€
    - ë„¤ì´í‹°ë¸Œ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ì²˜ëŸ¼ ë¶€ë“œëŸ¬ìš´ UX
  - ğŸš¨ **Critical Issue í•´ê²°: VideoPlayerController ë©”ëª¨ë¦¬ ê´€ë¦¬**
    - `_MediaPage.dispose()`ì—ì„œ `_controller?.dispose()` ì œê±°
    - ë¶€ëª¨(`_MediaViewerState`)ì—ì„œë§Œ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ëª¨ë¦¬ ì •ë¦¬
    - ì´ì¤‘ dispose ë¬¸ì œë¡œ ì¸í•œ í¬ë˜ì‹œ ë°©ì§€
    - í˜ì´ì§€ ì¬ë°©ë¬¸ ì‹œ ì•ˆì •ì„± ë³´ì¥
  - ë¹„ë””ì˜¤ ì´ˆê¸°í™” ë™ì‹œì„± ì œì–´ ì¶”ê°€ (ë™ì‹œ ì´ˆê¸°í™” ì œí•œ), ì‹¤íŒ¨ ì‹œ ë¶€ë¶„ì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ dispose ë° ì‚¬ìš©ì ì¬ì‹œë„ UI ì¶”ê°€
  - ì¸ë„¤ì¼ ìƒì„±/ë””ìŠ¤í¬ ìºì‹œ êµ¬í˜„ ë° ì¤‘ë³µ ìƒì„± ë°©ì§€ ë¡œì§ ì¶”ê°€
  - `lib/gallery_screen.dart`ë¥¼ ë‚ ì§œ(ì›”/ì¼)ë³„ë¡œ ê·¸ë£¹í™”í•˜ê³ , ì„¹ì…˜ í—¤ë”(Sticky) ë° 'ì˜¤ëŠ˜/ì–´ì œ' ìƒëŒ€ ë‚ ì§œ ë ˆì´ë¸” ì¶”ê°€
  - Sliver ê¸°ë°˜ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ì„¹ì…˜ í—¤ë” ê³ ì •(sticky header) êµ¬í˜„ ë° ê´€ë ¨ ë Œë” ì˜ˆì™¸ë¥¼ ìˆ˜ì •
  - ë¹Œë“œ ì˜¤ë¥˜ ìˆ˜ì •: `video_thumbnail` íŒ¨í‚¤ì§€ì˜ Java ì½”ë“œ ë©€í‹° ìºì¹˜ ë¬¸ì œ í•´ê²° ë° IOException ì²˜ë¦¬ ì¶”ê°€
  - AndroidManifest.xmlì— ì €ì¥ì†Œ ë° ì™¸ë¶€ ì €ì¥ì†Œ ê¶Œí•œ ì¶”ê°€
  - VideoThumbnailPlugin.javaì˜ setDataSource ë©”ì„œë“œ ê°œì„  (Uri ê¸°ë°˜ íŒŒì¼ ê²½ë¡œ ì§€ì›)
  - OnBackInvokedCallback í™œì„±í™”ë¡œ ë°± ë²„íŠ¼ ê²½ê³  í•´ê²°
  - **ì¹´ë©”ë¼ ì´ˆê¸°í™” ì˜¤ë¥˜ í•´ê²°**: `initState`ì—ì„œ `availableCameras()` í˜¸ì¶œ ì¶”ê°€
    - "Error initializing camera: Null check operator used on a null value" ì˜¤ë¥˜ í•´ê²°
    - "No cameras available" ìƒíƒœ ì œëŒ€ë¡œ ì²˜ë¦¬
  - **MissingPluginException í•´ê²°**: ì‹œìŠ¤í…œ ì‚¬ìš´ë“œ ìƒíƒœ í™•ì¸ ì œê±°
    - "Failed to get sound state: MissingPluginException" ì˜¤ë¥˜ í•´ê²°
  - **ì¸ë„¤ì¼ ìŠ¤í¬ë¡¤ë§ ì¤‘ì•™ ì •ë ¬**: `_scrollThumbToCenter` ë©”ì„œë“œ ê°œì„ 
    - ì„ íƒëœ ì¸ë„¤ì¼ì´ í•­ìƒ í™”ë©´ ì •ì¤‘ì•™ì— ìœ„ì¹˜
    - ì²« ë²ˆì§¸ ì‚¬ì§„ì€ ì •ì¤‘ì•™ì—ì„œ ì‹œì‘, ë§ˆì§€ë§‰ ì‚¬ì§„ì€ ì •ì¤‘ì•™ì—ì„œ ë©ˆì¶¤
    - ì´ë¯¸ì§€ ë„˜ê¹€ ë° ì¸ë„¤ì¼ ì„ íƒ ì‹œ ì¼ê´€ëœ ìŠ¤í¬ë¡¤ ë™ì‘ êµ¬í˜„

---
## 2025-11-08

- **ì–´ì œ ì‘ì—…**
  - `lib/media_viewer.dart` ë‚´ë¶€ ë¹„ë””ì˜¤ ì´ˆê¸°í™” ë¡œì§ ì ê²€ ë° ê°œì„  (on-demand ì´ˆê¸°í™”, ìë™ ì¬ì‹œë„ ì œê±°)
  - `lib/camera_screen.dart`ì˜ íƒ€ì´ë¨¸/ë¼ì´í”„ì‚¬ì´í´ ê´€ë ¨ setState ì•ˆì „ì„± ìˆ˜ì •
  - ë””ë°”ì´ìŠ¤ì—ì„œ ì¬í˜„ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ VideoPlayer.initialize() íƒ€ì„ì•„ì›ƒê³¼ ê´€ë ¨ ë¡œê·¸ ìˆ˜ì§‘

---
## 2025-11-03

- **ê´‘ê³  í†µí•©**
  - `google_mobile_ads` íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ë„ˆ ê´‘ê³ ë¥¼ `media_viewer.dart`ì™€ `gallery_screen.dart`ì— í†µí•©.
  - ê´‘ê³ ê°€ ì½˜í…ì¸ ë¥¼ ê°€ë¦¬ì§€ ì•Šë„ë¡ `bottomNavigationBar`ì— ë°°ì¹˜.
- **ë²„ê·¸ ìˆ˜ì •**
  - `gallery_screen.dart`ì—ì„œ ëˆ„ë½ëœ ë‹«ëŠ” ê´„í˜¸ `)` ë¬¸ì œ í•´ê²°.
  - `flutter pub upgrade`ë¥¼ í†µí•´ ì¢…ì†ì„± ì¼ë¶€ë¥¼ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸.
- **ë¹Œë“œ ì„±ê³µ**
  - ìˆ˜ì •ëœ ì½”ë“œë¡œ ë¹Œë“œ ì„±ê³µ (`app-release.apk` ìƒì„±).

---
## 2025-11-02

- `lib/media_viewer.dart`: ë¹„ë””ì˜¤ ì´ˆê¸°í™” íƒ€ì„ì•„ì›ƒì„ 30ì´ˆë¡œ ì—°ì¥í•˜ê³  ë™ì  ì¡°ì • ê°€ëŠ¥ì„±ì„ ìœ„í•œ í”Œë ˆì´ìŠ¤í™€ë” ì¶”ê°€.
- `lib/camera_screen.dart`: `_lastPreviewBytes`ë¥¼ `dispose()`ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ í•´ì œí•˜ì—¬ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€.
- `lib/gallery_screen.dart`: ëŒ€ê·œëª¨ ê°¤ëŸ¬ë¦¬ ìŠ¤í¬ë¡¤ì„ ìœ„í•œ í˜ì´ì§€ë„¤ì´ì…˜ ì¶”ê°€.
- `lib/image_viewer.dart`: ë¯¸ì‚¬ìš© íŒŒì¼ë¡œ í™•ì¸ë˜ì–´ ì œê±° ì™„ë£Œ.
- `pubspec.yaml`: `device_info_plus` ì˜ì¡´ì„± ì¶”ê°€ë¡œ ë™ì  ë™ì‹œì„± ì œì–´ êµ¬í˜„.

---
## ì£¼ìš” ì§„í–‰ìƒí™© (ìƒì‹œ)

- ì—…ë¬´ ì‚¬ì§„ì€ ì•± ë‚´ì—ì„œë§Œ ê´€ë¦¬, ê¸°ë³¸ ê°¤ëŸ¬ë¦¬ì—ëŠ” ë…¸ì¶œë˜ì§€ ì•ŠìŒ

## í•´ê²°ëœ ë¬¸ì œ

1. ë¹„ë””ì˜¤ ì´ˆê¸°í™” ë™ì‹œì„± ì œì–´ ì™„ë£Œ.
2. ì¸ë„¤ì¼ ìƒì„± ë° ë””ìŠ¤í¬ ìºì‹œ ë¡œì§ ì™„ë£Œ.
3. ê°¤ëŸ¬ë¦¬ ë‚ ì§œë³„ ê·¸ë£¹í™” ë° ì„¹ì…˜ í—¤ë” ê³ ì • ì™„ë£Œ.
4. Sliver ê¸°ë°˜ ë ˆì´ì•„ì›ƒ ë Œë” ì˜ˆì™¸ ìˆ˜ì • ì™„ë£Œ.
5. ë¹Œë“œ ì˜¤ë¥˜ í•´ê²°: `video_thumbnail` íŒ¨í‚¤ì§€ Java ì½”ë“œ ìˆ˜ì • ë° ê¶Œí•œ ì¶”ê°€.
6. **ì¹´ë©”ë¼ ì´ˆê¸°í™” ì˜¤ë¥˜ í•´ê²°**: ì¹´ë©”ë¼ ëª©ë¡ ì¡°íšŒ ë° null ì²´í¬ ì¶”ê°€.
7. **MissingPluginException í•´ê²°**: ì‹œìŠ¤í…œ ì‚¬ìš´ë“œ ìƒíƒœ í™•ì¸ ì œê±°.
8. **ì¸ë„¤ì¼ ìŠ¤í¬ë¡¤ë§ ì¤‘ì•™ ì •ë ¬**: ì„ íƒëœ ì¸ë„¤ì¼ì´ í•­ìƒ í™”ë©´ ì¤‘ì•™ì— ìœ„ì¹˜í•˜ë„ë¡ êµ¬í˜„.

## ë‚¨ì€ ì‘ì—…

1. ë„¤ì´í‹°ë¸Œ í¬ë˜ì‹œ(SIGSEGV, Vulkan ë“œë¼ì´ë²„) ì›ì¸ ë¶„ì„
	- ì „ì²´ `adb logcat`ê³¼ tombstone íŒŒì¼ ìˆ˜ì§‘ ë° ë¶„ì„ í•„ìš”
	- ì†Œí”„íŠ¸ì›¨ì–´ ë Œë”ë§ìœ¼ë¡œ ì‹¤í–‰í•´ ë“œë¼ì´ë²„/ë°±ì—”ë“œ ë¬¸ì œ ì—¬ë¶€ë¥¼ ë¶„ë¦¬ í…ŒìŠ¤íŠ¸
2. `media_viewer.dart` ì¶”ê°€ ë°©ì–´ ì ìš©
	- í™”ë©´ì—ì„œ ë²—ì–´ë‚œ í˜ì´ì§€ì˜ VideoPlayerController ì¦‰ì‹œ dispose
	- ë¶€ëª¨ ìˆ˜ì¤€ì˜ ì—„ê²©í•œ ì´ˆê¸°í™” í(ì‹±ê¸€ ì¸ìŠ¤í„´ìŠ¤) ì ìš© ë° ë°±ì˜¤í”„ ì •ì±… ë„ì…
3. ì„±ëŠ¥/UX ê°œì„ 
	- Sliver ì„±ëŠ¥ ê°œì„ (ëŒ€ëŸ‰ ì´ë¯¸ì§€ì—ì„œì˜ ìŠ¤í¬ë¡¤ ìµœì í™”), ì´ë¯¸ì§€ í˜ì´ì§• ë˜ëŠ” ì¸ë„¤ì¼ ìºì‹œ ì •ì±… ê°œì„ 
	- 'ì˜¤ëŠ˜/ì–´ì œ' ë¼ë²¨ì„ ì§€ì—­í™”(Intl)í•˜ê³  sticky header ìŠ¤íƒ€ì¼ ë‹¤ë“¬ê¸°
4. ë¡œê·¸ ê´€ë ¨ ë¬¸ì œ í•´ê²°
	- `ImageReader_JNI: Unable to acquire a buffer item` ì˜¤ë¥˜ í•´ê²° (maxImages ì œí•œ ì¦ê°€ ë˜ëŠ” ë²„í¼ í•´ì œ)
	- `Surface.release` ê²½ê³  í•´ê²° (Surface ê°ì²´ ì ì ˆí•œ í•´ì œ)
5. **ì¶”ê°€ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦**
	- ì¹´ë©”ë¼ ì´ˆê¸°í™” ì˜¤ë¥˜ê°€ ì™„ì „íˆ í•´ê²°ë˜ì—ˆëŠ”ì§€ í™•ì¸
	- ì¸ë„¤ì¼ ìŠ¤í¬ë¡¤ë§ì´ ëª¨ë“  ê¸°ê¸°ì—ì„œ ì¼ê´€ë˜ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸
	- MissingPluginExceptionì´ ì¬ë°œí•˜ì§€ ì•ŠëŠ”ì§€ ëª¨ë‹ˆí„°ë§

## GitHub ë°˜ì˜

ë³€ê²½ì‚¬í•­ì„ ë¡œì»¬ ì €ì¥ì†Œì— ì»¤ë°‹í–ˆìŠµë‹ˆë‹¤. ì›ê²©(GitHub)ì— í‘¸ì‹œí•˜ì‹œë ¤ë©´ ì•„ë˜ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì„¸ìš”:

```powershell
# ë¡œì»¬ ì»¤ë°‹ í›„ ì›ê²© í‘¸ì‹œ(ì˜ˆ: origin/master)
git add README.md
git commit -m "docs: update README with yesterday/today summary and next steps"
git push origin master
```

ì›í•˜ì‹œë©´ ì œê°€ ì´ ì €ì¥ì†Œì— ëŒ€í•´ ë¡œì»¬ ì»¤ë°‹ì„ ë§Œë“¤ê³ (ì´ë¯¸ ìˆ˜í–‰), ì›ê²©ìœ¼ë¡œ í‘¸ì‹œê¹Œì§€ ì§„í–‰í•´ ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° ì›ê²© ì ‘ê·¼ ê¶Œí•œ(credential)ì´ í•„ìš”í•©ë‹ˆë‹¤.

---

## ì¤‘ìš” ì´ìŠˆ: ì„¬ë„¤ì¼ ë¡œë”© í›„ ë¬´í•œ ìŠ¤í”¼ë‹

- í˜„ìƒ: ìµœê·¼ì— ì¸ë„¤ì¼ì— ë¡œë”© í”Œë ˆì´ìŠ¤í™€ë”(Shimmer)ë¥¼ ì¶”ê°€í•œ ì´í›„ë¡œ ì¼ë¶€ ë¹„ë””ì˜¤ê°€ ë·°ì–´ì—ì„œ 'ë¬´í•œ ë¡œë”©(spinning)' ìƒíƒœì— ë¹ ì§€ëŠ” ë¬¸ì œê°€ ì¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë¬¸ì œëŠ” ì˜¤ëŠ˜ ë””ë²„ê¹…ìœ¼ë¡œë„ ì™„ì „íˆ í•´ê²°ë˜ì§€ ì•Šì•˜ê³ , ì¶”ê°€ ë¶„ì„ì´ í•„ìš”í•©ë‹ˆë‹¤.
- ì›ì¸ ì¶”ì •(ìš°ì„  ê°€ì„¤): ì¸ë„¤ì¼ ìƒì„±/ë Œë”ë§ê³¼ VideoPlayer ì´ˆê¸°í™” ê°„ì˜ íƒ€ì´ë°/ê²½í•©, ë˜ëŠ” SurfaceTexture í• ë‹¹ íƒ€ì´ë°ì´ ê¼¬ì´ë©´ì„œ VideoPlayer.initialize()ê°€ ì™„ë£Œë˜ì§€ ì•Šê±°ë‚˜ íƒ€ì„ì•„ì›ƒë˜ëŠ” ì¼€ì´ìŠ¤.
- ì¡°ì¹˜ ê³„íš (ë‚´ì¼ ìš°ì„  ì²˜ë¦¬):
  1. ì„¬ë„¤ì¼ placeholderë¥¼ ì„ì‹œë¡œ ë¹„í™œì„±í™”í•˜ì—¬ ë¬¸ì œê°€ ì„¬ë„¤ì¼ ìª½ì¸ì§€ í™•ì¸
  2. VideoPlayer ì´ˆê¸°í™” íë¦„ì„ ë¶€ëª¨(ë˜ëŠ” ì¤‘ì•™)ì—ì„œ ì‹œë¦¬ì–¼í™”(í•œ ë²ˆì— í•œ íŒŒì¼ë§Œ initialize)í•˜ì—¬ ë¦¬ì†ŒìŠ¤ ê²½í•© ì™„í™”
  3. ì´ˆê¸°í™” ì‹¤íŒ¨ ì‹œ ëª…í™•í•œ ìƒíƒœ(ì—ëŸ¬ UI) ë…¸ì¶œ ë° ì¬ì‹œë„ ë¡œì§ ë³´ê°•
  4. adb logcatê³¼ ë„¤ì´í‹°ë¸Œ tombstone(í¬ë˜ì‹œ ë¤í”„) í™•ë³´ ë° ë¶„ì„

ì´ ì´ìŠˆëŠ” ë‚´ì¼ ìµœìš°ì„ ìœ¼ë¡œ ì´ì–´ì„œ ì¡°ì‚¬/í•´ê²°í•  ì˜ˆì •ì…ë‹ˆë‹¤.
- ì¸ë„¤ì¼/ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€ë¥¼ ëˆ„ë¥´ë©´ ìŠ¬ë¼ì´ë“œ ë·°ì–´ë¡œ ì „ì²´ ì—…ë¬´ ì‚¬ì§„ íƒìƒ‰ ê°€ëŠ¥

## í˜„ì¬ ë¬¸ì œì  ë° ê°œì„  í•„ìš”ì‚¬í•­
- ì´ë¯¸ì§€ ë·°ì–´ ë”ë¸”íƒ­ í™•ëŒ€ UX: í•œ ë²ˆì— ì›í•˜ëŠ” ë°°ìœ¨ë¡œ í™•ëŒ€ë˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆìŒ (ì»¤ìŠ¤í…€ í™•ëŒ€/ì¶•ì†Œ ë¡œì§ ì ìš© ì¤‘)
- ë¯¸ë””ì–´ìŠ¤í† ì–´ ë™ê¸°í™”: ì¼ë¶€ ê¸°ê¸°ì—ì„œ íŒŒì¼ íƒìƒ‰/ì‚­ì œ ì‹œ ë™ê¸°í™” ì§€ì—° ê°€ëŠ¥ì„±
- ì‚¬ì§„ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ì„±ëŠ¥: ì´ë¯¸ì§€ê°€ ë§ì•„ì§ˆ ê²½ìš° ë¡œë”© ì†ë„ ì €í•˜ ê°€ëŠ¥ì„±
- iOS/ì›¹ í˜¸í™˜ì„± ë¯¸ê²€ì¦ (í˜„ì¬ Android ì¤‘ì‹¬ ê°œë°œ)
- ê¸°íƒ€ UI/UX ì„¸ë¶€ ê°œì„  ë° í…ŒìŠ¤íŠ¸ í•„ìš”

---
ì§„í–‰ìƒí™© ë° ê¸°ëŠ¥ ë¬¸ì˜ëŠ” ê¹ƒí—ˆë¸Œ ì´ìŠˆë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”.

## ìµœì‹  ì§„í–‰ìƒí™© ì—…ë°ì´íŠ¸ (2025ë…„ 11ì›” 2ì¼)

### ìµœê·¼ ì™„ë£Œ ì‘ì—…

- `lib/media_viewer.dart`: ë¹„ë””ì˜¤ ì´ˆê¸°í™” íƒ€ì„ì•„ì›ƒì„ 30ì´ˆë¡œ ì—°ì¥í•˜ê³  ë™ì  ì¡°ì • ê°€ëŠ¥ì„±ì„ ìœ„í•œ í”Œë ˆì´ìŠ¤í™€ë” ì¶”ê°€.
- `lib/camera_screen.dart`: `_lastPreviewBytes`ë¥¼ `dispose()`ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ í•´ì œí•˜ì—¬ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€.
- `lib/gallery_screen.dart`: ëŒ€ê·œëª¨ ê°¤ëŸ¬ë¦¬ ìŠ¤í¬ë¡¤ì„ ìœ„í•œ í˜ì´ì§€ë„¤ì´ì…˜ ì¶”ê°€.
- `lib/image_viewer.dart`: ë¯¸ì‚¬ìš© íŒŒì¼ë¡œ í™•ì¸ë˜ì–´ ì œê±° ì™„ë£Œ.
- `pubspec.yaml`: `device_info_plus` ì˜ì¡´ì„± ì¶”ê°€ë¡œ ë™ì  ë™ì‹œì„± ì œì–´ êµ¬í˜„.

### ë‹¤ìŒ ì‘ì—… ì˜ˆì •

- ë””ë°”ì´ìŠ¤ì—ì„œ ì•± ì‹¤í–‰ í›„ ê²€ì¦:
  - ì¸ë„¤ì¼ í‘œì‹œ, ë¹„ë””ì˜¤ ì´ˆê¸°í™”, ê´‘ê³  ë¡œë“œ ë™ì‘ í™•ì¸.
  - ë¡œê·¸ ìˆ˜ì§‘ ë° ë¶„ì„.
- iOS Info.plist ì„¤ì • í™•ì¸:
  - AdMob/ATS í•­ëª©ì„ ìµœì†Œ ê¶Œí•œìœ¼ë¡œ ì ìš©.
- AdMob ì‹¤ë°°ë„ˆ ID ì ìš©:
  - í”„ë¡œë•ì…˜ ê´‘ê³  ìœ ë‹› IDë¡œ êµì²´ ë° ë™ì‘ í™•ì¸.

## âš ï¸ ì£¼ìš” ì´ìŠˆ ë° ê°œì„  ì‚¬í•­ (2025ë…„ 11ì›” 2ì¼)

### 1. ë¹„ë””ì˜¤ ì´ˆê¸°í™” íƒ€ì„ì•„ì›ƒ ë¬¸ì œ
- **í˜„ì¬**: `media_viewer.dart`ì—ì„œ 15ì´ˆ íƒ€ì„ì•„ì›ƒì´ ë³´ìˆ˜ì .
  ```dart
  await _controller!.initialize().timeout(const Duration(seconds: 15));
  ```
- **ê¶Œì¥ì‚¬í•­**:
  - íƒ€ì„ì•„ì›ƒì„ ë” ê¸¸ê²Œ (20-30ì´ˆ).
  - ê¸°ê¸° ì‚¬ì–‘ì— ë”°ë¼ ë™ì  ì¡°ì •.
  - ì´ˆê¸°í™” ì „ ë©”ëª¨ë¦¬ ìƒíƒœ ì²´í¬.

### 2. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜
- **í˜„ì¬**: `camera_screen.dart`ì˜ `_lastPreviewBytes`ê°€ ê³„ì† ìœ ì§€ë  ìˆ˜ ìˆìŒ.
  ```dart
  Uint8List? _lastPreviewBytes;
  ```
- **ê°œì„ ì•ˆ**:
  ```dart
  @override
  void dispose() {
    _lastPreviewBytes = null;  // ëª…ì‹œì  í•´ì œ
    _flashTimer?.cancel();
    _controller?.dispose();
    super.dispose();
  }
  ```

### 3. ImageViewer.dart ë¯¸ì‚¬ìš©
- **í˜„ì¬**: `ImageViewer.dart`ê°€ ì‹¤ì œë¡œ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ. ëŒ€ì‹  `MediaViewer`ë¥¼ ì‚¬ìš© ì¤‘.
- **ì œì•ˆ**: ë¶ˆí•„ìš”í•œ íŒŒì¼ ì œê±° ë˜ëŠ” í†µí•©.

### 4. ì—ëŸ¬ ì²˜ë¦¬ ë¶€ì¡±
- **í˜„ì¬**: ì—¬ëŸ¬ ê³³ì—ì„œ `try-catch` í›„ ë‹¨ìˆœíˆ `debugPrint`ë§Œ ì‹¤í–‰.
  ```dart
  catch (e) {
    debugPrint('permission request error: $e');
    return false;
  }
  ```
- **ê°œì„ ì•ˆ**:
  ```dart
  catch (e) {
    debugPrint('permission request error: $e');
    if (mounted) {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('ê¶Œí•œ ì˜¤ë¥˜: $e'))
      );
    }
    return false;
  }
  ```

### 5. ë™ì‹œì„± ì œì–´ ê°•í™” í•„ìš”
- **í˜„ì¬**: `_maxConcurrentInits = 1`ë¡œ ê³ ì •.
- **ë¬¸ì œ**: ê¸°ê¸° ì‚¬ì–‘ì„ ê³ ë ¤í•˜ì§€ ì•ŠìŒ.
- **ê°œì„ ì•ˆ**:
  ```dart
  int get _maxConcurrentInits {
    final info = await DeviceInfoPlugin().deviceInfo;
    return (info.totalMemory ?? 4000000000) > 3000000000 ? 2 : 1;
  }
  ```

### 6. AdMob í…ŒìŠ¤íŠ¸ ID ì‚¬ìš©
- **í˜„ì¬**: `gallery_screen.dart` & `media_viewer.dart`ì—ì„œ í…ŒìŠ¤íŠ¸ ID ì‚¬ìš©.
  ```dart
  adUnitId: 'ca-app-pub-3940256099942544/9214589741',  // í…ŒìŠ¤íŠ¸ ID
  ```
- **ì£¼ì˜**: í”„ë¡œë•ì…˜ ë°°í¬ ì „ ì‹¤ì œ AdMob IDë¡œ ë³€ê²½ í•„ìš”.

### 7. ê¶Œí•œ ìš”ì²­ UX ê°œì„ 
- **í˜„ì¬**: ë¹„ë””ì˜¤ ë…¹í™” ì¤‘ ë§ˆì´í¬ ê¶Œí•œ ì¬ìš”ì²­.
  ```dart
  if (_captureMode == CaptureMode.video) {
    final micStatus = await Permission.microphone.status;
    if (!micStatus.isGranted) {
      // ë¯¸ë¦¬ ì•± ì‹œì‘ ì‹œ ìš”ì²­í•˜ëŠ” ê²Œ ë‚˜ìŒ
    }
  }
  ```
- **ì œì•ˆ**: `initState`ì—ì„œ ì‚¬ì „ ê¶Œí•œ ìš”ì²­.

### 8. íŒŒì¼ ì‹œìŠ¤í…œ ê²½ë¡œ ìµœì í™”
- **í˜„ì¬**: ë°˜ë³µë˜ëŠ” ê²½ë¡œ ìƒì„±.
  ```dart
  final Directory appDir = await getApplicationDocumentsDirectory();
  final Directory workDir = Directory('${appDir.path}/flutter_camera_work');
  ```
- **ê°œì„ ì•ˆ**:
  ```dart
  const String WORK_DIR_NAME = 'flutter_camera_work';

  Future<Directory> getWorkDirectory() async {
    final appDir = await getApplicationDocumentsDirectory();
    final workDir = Directory('${appDir.path}/$WORK_DIR_NAME');
    if (!await workDir.exists()) {
      await workDir.create(recursive: true);
    }
    return workDir;
  }
  ```

### 9. ë¹„ë””ì˜¤ ë…¹í™” ìƒíƒœ ê´€ë¦¬
- **í˜„ì¬**: ë…¹í™” ì¤‘ ì•± ë°±ê·¸ë¼ìš´ë“œ ì „í™˜ ì‹œ ì²˜ë¦¬ í•„ìš”.
  ```dart
  Future<void> _stopRecording() async {
    if (!_isRecording) return;
    // ì•±ì´ ì¼ì‹œ ì¤‘ì§€ë˜ë©´?
  }
  ```
- **ì œì•ˆ**: ì•± ë¼ì´í”„ì‚¬ì´í´ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€.
  ```dart
  @override
  void initState() {
    super.initState();
    WidgetsBinding.instance.addObserver(this);
  }

  @override
  void didChangeAppLifecycleState(AppLifecycleState state) {
    if (state == AppLifecycleState.paused && _isRecording) {
      _stopRecording();
    }
  }
  ```

### 10. ì„±ëŠ¥: í° ê°¤ëŸ¬ë¦¬ ìŠ¤í¬ë¡¤
- **í˜„ì¬**: ëª¨ë“  íŒŒì¼ì„ í•œ ë²ˆì— ë¡œë“œ.
  ```dart
  final files = await workDir.list().where(...).toList();
  ```
- **ê°œì„ ì•ˆ**: í˜ì´ì§€ë„¤ì´ì…˜ ë˜ëŠ” ê°€ìƒ ìŠ¤í¬ë¡¤.
  ```dart
  ListView.builder(
    itemCount: _groupKeys.length,
    itemBuilder: (context, gi) {
      return _buildGroupLazy(_groupKeys[gi]);
    }
  )
  ```

## 2025ë…„ 11ì›” 3ì¼ ì§„í–‰ ìƒí™©

- **ê´‘ê³  í†µí•©**:
  - `google_mobile_ads` íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ë„ˆ ê´‘ê³ ë¥¼ `media_viewer.dart`ì™€ `gallery_screen.dart`ì— í†µí•©.
  - ê´‘ê³ ê°€ ì½˜í…ì¸ ë¥¼ ê°€ë¦¬ì§€ ì•Šë„ë¡ `bottomNavigationBar`ì— ë°°ì¹˜.

- **ë²„ê·¸ ìˆ˜ì •**:
  - `gallery_screen.dart`ì—ì„œ ëˆ„ë½ëœ ë‹«ëŠ” ê´„í˜¸ `)` ë¬¸ì œ í•´ê²°.
  - `flutter pub upgrade`ë¥¼ í†µí•´ ì¢…ì†ì„± ì¼ë¶€ë¥¼ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸.

- **ë¹Œë“œ ì„±ê³µ**:
  - ìˆ˜ì •ëœ ì½”ë“œë¡œ ë¹Œë“œ ì„±ê³µ (`app-release.apk` ìƒì„±).

## ë‹¤ìŒ ì‘ì—…

1. ê´‘ê³ ê°€ ëª¨ë“  ë””ë°”ì´ìŠ¤ì—ì„œ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸.
2. ì¶”ê°€ì ì¸ UI/UX ê°œì„  ì‘ì—….
  
  - **2025-11-08(ì˜¤ëŠ˜):**
    - ì¸ë„¤ì¼ ìŠ¤íŠ¸ë¦½ì—ì„œ ì„ íƒëœ ì¸ë„¤ì¼(í•˜ì–€ í…Œë‘ë¦¬)ì´ í•­ìƒ ì¢Œì¸¡ì—ì„œ 3ë²ˆì§¸ ìœ„ì¹˜ì— ê³ ì •ë˜ë„ë¡ padding/offset ê³„ì‚° ë¡œì§ ìˆ˜ì • ì‹œë„
    - ì‹¤ì œë¡œëŠ” ìŠ¤í¬ë¡¤ ì‹œ í…Œë‘ë¦¬ê°€ ì›€ì§ì´ê³ , í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ëŠ” í˜„ìƒ ì§€ì†
    - ë‚´ì¼ ì¶”ê°€ ë¶„ì„ ë° ë””ë²„ê¹… ì˜ˆì • (ì˜¤ëŠ˜ì€ ê¸°ë¡ë§Œ ë‚¨ê¸°ê³  ì¤‘ë‹¨)
5. ì¸ë„¤ì¼ ìŠ¤íŠ¸ë¦½ í•˜ì–€ í…Œë‘ë¦¬ ìœ„ì¹˜ ê³ ì • ì´ìŠˆ
  - ì„ íƒëœ ì¸ë„¤ì¼ì˜ í•˜ì–€ í…Œë‘ë¦¬ê°€ í•­ìƒ ì¢Œì¸¡ì—ì„œ 3ë²ˆì§¸ ìœ„ì¹˜ì— ê³ ì •ë˜ì–´ì•¼ í•˜ë‚˜, ìŠ¤í¬ë¡¤ ì‹œ í…Œë‘ë¦¬ê°€ ì›€ì§ì´ê³  í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ëŠ” ë¬¸ì œ ì§€ì†
  - padding/offset ê³„ì‚°ì‹ ì¶”ê°€ ì ê²€ ë° ListView/ìŠ¤í¬ë¡¤ ë™ì‘ ë¡œì§ ì¬ì„¤ê³„ í•„ìš”
  - ë‚´ì¼ ì¶”ê°€ ë¶„ì„ ë° ê°œì„  ì˜ˆì •
